# 📅 2026-01-16 (3일차) 학습 기록

## 📊 오늘의 학습 요약
| 항목 | 내용 |
| :--- | :--- |
| **학습 주제** | 계층형 아키텍처(Layered Architecture) 심화 및 운영 환경(Docker, Logging) 구축 |
| **목표 달성도** | ⭐⭐⭐⭐⭐ (5/5) - 모든 트러블슈팅 완료 및 미션 성공 |
| **핵심 키워드** | Repository Pattern, Dependency Injection, Docker Compose, TimedRotatingFileHandler |

---

## 💡 주요 학습 내용

### 1️⃣ 기술적 핵심 (Technical Points)

#### **계층형 아키텍처 (Layered Architecture)**
* **Router (API Layer)**: 클라이언트 요청 수신 및 응답 반환.
* **Service (Business Layer)**: 핵심 비즈니스 로직 처리 및 트랜잭션 관리.
* **Repository (Data Access Layer)**: DB 직접 접근 및 CRUD 쿼리 수행.
* **Entity/Schema**: SQLAlchemy 모델(DB용)과 Pydantic 모델(API용)의 역할 분리.

#### **의존성 주입 (Dependency Injection)**
* FastAPI의 `Depends`를 사용하여 필요한 객체를 외부에서 주입.
* 객체 생성과 사용을 분리하여 코드의 결합도를 낮추고 테스트 용이성 확보.

#### **실무형 로깅 시스템 (Logging)**
* **Multi-Handler**: `StreamHandler`(콘솔)와 `TimedRotatingFileHandler`(파일) 동시 사용.
* **Log Rolling**: `when='H'`, `interval=1`, `backupCount=24` 설정을 통해 시간 단위로 로그 파일을 관리하여 디스크 용량 과부하 방지.
* **표준 포맷**: `[시간] [로그레벨] [파일명:라인번호] - 메시지` 포맷 적용.

#### **Docker & DB 연동**
* **Docker Compose**: API와 MySQL 컨테이너를 통합 관리.
* **Healthcheck**: DB가 완전히 준비된 후 API 서버가 시작되도록 의존성 제어.
* **Volume Mapping**: 컨테이너 삭제 시에도 로그와 DB 데이터가 호스트 PC에 보존되도록 설정.

---

### 2️⃣ 논의 및 회고 (Discussion & Reflection)

#### **트러블슈팅: Git 중복 저장소 (Embedded Git)**
* **문제**: 하위 폴더에 `.git` 폴더가 존재하여 GitHub 업로드 시 폴더가 비어 보이는 현상 발생.
* **해결**: `Remove-Item -Recurse -Force .git` 명령으로 하위 Git 정보를 삭제하고 루트 저장소로 통합하여 해결.

#### **트러블슈팅: 로그 파일 기록 지연 (Buffering)**
* **문제**: 터미널에는 로그가 찍히나 실제 파일 내용이 비어있는 현상.
* **해결**: 파이썬 로깅 버퍼링 특성을 이해하고, 서버 종료(`Ctrl+C`) 시 데이터가 파일로 Flush되는 것을 확인하여 미션 증빙 완료.

#### **회고**
* 단순한 기능 구현을 넘어, 실제 서비스 운영 시 필요한 로깅 정책과 컨테이너 환경 구축의 중요성을 깨달음. 
* 환경 설정(Docker, Git)이 꼬였을 때 당황하지 않고 PowerShell/명령어의 특성에 맞춰 해결하는 능력을 배양함.

---

## 🚀 내일의 계획
- [ ] 실제 MySQL 데이터베이스 쿼리 최적화 및 인덱스(Index) 실습
- [ ] JWT 기반의 인증(Authentication) 및 인가(Authorization) 계층 추가
- [ ] 전체 프로젝트 리팩토링 및 README.md 상세화

---